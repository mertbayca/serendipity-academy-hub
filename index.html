
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Innovators Serendipity Academy</title>
    <meta name="description" content="Join a powerful community of leaders, innovators, and changemakers ready to grow—together." />
    <meta name="author" content="Innovators Serendipity Academy" />

    <meta property="og:title" content="Innovators Serendipity Academy" />
    <meta property="og:description" content="Join a powerful community of leaders, innovators, and changemakers ready to grow—together." />
    <meta property="og:type" content="website" />

    <!-- Performance: hint connection to Butlerapp -->
    <link rel="preconnect" href="https://innovators-serendipity.butlerapp2.de" crossorigin>
    <link rel="dns-prefetch" href="//innovators-serendipity.butlerapp2.de">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SDYWRM4RFF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);} // eslint-disable-line
      gtag('js', new Date());
      // Default config; SPA route changes are tracked in App.tsx
      gtag('config', 'G-SDYWRM4RFF');
    </script>
  </head>

  <body>
    <div id="root"></div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    
    <!-- Butlerapp Integration Scripts -->
    <script src="https://innovators-serendipity.butlerapp2.de/bee-react-form/bee-form.min.js"></script>
    <script>
      // Initialize Butlerapp Websail widgets
      window.addEventListener('load', function () {
        try {
          // Some builds expose websail late; retry once if needed
          const init = () => window.websail && window.websail.init && window.websail.init({ apiBaseUrl: 'https://innovators-serendipity.butlerapp2.de' });
          if (!init()) setTimeout(init, 500);
        } catch (e) {
          console.warn('Butlerapp init skipped:', e);
        }
      });
    </script>
    <script>
      // Normalize Butlerapp links generated by widgets to use local /w route (no demo)
      (function () {
        function rewriteButlerappLinks(root) {
          try {
            const scope = root || document;
            const anchors = scope.querySelectorAll('.websail a[href*="butlerapp2.de/"][href*="/bookcart"]');
            anchors.forEach(a => {
              try {
                const u = new URL(a.href);
                const hash = u.hash || '';
                const qIndex = hash.indexOf('?');
                const q = qIndex >= 0 ? hash.substring(qIndex) : '';
                a.href = '/w#/bookcart' + q;
              } catch (_) {}
            });
          } catch (_) {}
        }

        window.addEventListener('load', function () {
          rewriteButlerappLinks(document);
          // Intercept clicks as a fallback to ensure local routing
          document.addEventListener('click', function (ev) {
            const target = ev.target instanceof Element ? ev.target : null;
            const a = target ? target.closest('.websail a') : null;
            if (a && a.href && a.href.includes('butlerapp2.de/') && a.href.includes('/bookcart')) {
              try {
                const u = new URL(a.href);
                const hash = u.hash || '';
                const qIndex = hash.indexOf('?');
                const q = qIndex >= 0 ? hash.substring(qIndex) : '';
                ev.preventDefault();
                const tgt = a.getAttribute('target') === '_blank' ? '_blank' : '_self';
                window.open('/w#/bookcart' + q, tgt);
              } catch (_) {}
            }
          }, true);
          const observer = new MutationObserver(() => rewriteButlerappLinks(document));
          document.querySelectorAll('.websail').forEach(el => {
            observer.observe(el, { childList: true, subtree: true });
          });
        });
      })();
    </script>

    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
